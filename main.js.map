{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-webpack-project/./src/components/base/Api.ts","webpack://my-webpack-project/./src/components/base/Component.ts","webpack://my-webpack-project/./src/components/base/EventEmitter.ts","webpack://my-webpack-project/./src/components/base/Model.ts","webpack://my-webpack-project/./src/components/model/AppState.ts","webpack://my-webpack-project/./src/components/view/ProductApi.ts","webpack://my-webpack-project/./src/components/view/common/Modal.ts","webpack://my-webpack-project/./src/components/view/partial/Basket.ts","webpack://my-webpack-project/./src/components/view/partial/Card.ts","webpack://my-webpack-project/./src/components/view/partial/Page.ts","webpack://my-webpack-project/./src/components/view/screen/Form.ts","webpack://my-webpack-project/./src/components/view/screen/FormContacts.ts","webpack://my-webpack-project/./src/components/view/screen/FormOrder.ts","webpack://my-webpack-project/./src/components/view/screen/Success.ts","webpack://my-webpack-project/./src/utils/constants.ts","webpack://my-webpack-project/./src/utils/utils.ts","webpack://my-webpack-project/webpack/bootstrap","webpack://my-webpack-project/webpack/runtime/make namespace object","webpack://my-webpack-project/./src/index.ts"],"sourcesContent":["export type ApiListResponse<Type> = {\r\n\ttotal: number;\r\n\titems: Type[];\r\n};\r\n\r\nexport type ApiPostMethods = 'POST' | 'PUT' | 'DELETE';\r\n\r\nexport class Api {\r\n\treadonly baseUrl: string;\r\n\tprotected options: RequestInit;\r\n\r\n\tconstructor(baseUrl: string, options: RequestInit = {}) {\r\n\t\tthis.baseUrl = baseUrl;\r\n\t\tthis.options = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t...((options.headers as object) ?? {}),\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tprotected handleResponse<T>(response: Response): Promise<T> {\r\n\t\tif (response.ok) return response.json();\r\n\t\telse\r\n\t\t\treturn response\r\n\t\t\t\t.json()\r\n\t\t\t\t.then((data) => Promise.reject(data.error ?? response.statusText));\r\n\t}\r\n\r\n\tget<T>(uri: string) {\r\n\t\treturn fetch(this.baseUrl + uri, {\r\n\t\t\t...this.options,\r\n\t\t\tmethod: 'GET',\r\n\t\t}).then(this.handleResponse) as Promise<T>;\r\n\t}\r\n\r\n\tpost<T>(uri: string, data: object, method: ApiPostMethods = 'POST') {\r\n\t\treturn fetch(this.baseUrl + uri, {\r\n\t\t\t...this.options,\r\n\t\t\tmethod,\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t}).then(this.handleResponse) as Promise<T>;\r\n\t}\r\n}\r\n","export abstract class Component<T> {\r\n\tprotected constructor(protected readonly container: HTMLElement) {}\r\n\r\n\ttoggleClass(element: HTMLElement, className: string, force?: boolean) {\r\n\t\telement.classList.toggle(className, force);\r\n\t}\r\n\r\n\tprotected setText(element: HTMLElement, value: unknown) {\r\n\t\tif (element) {\r\n\t\t\telement.textContent = String(value);\r\n\t\t}\r\n\t}\r\n\r\n\tsetDisabled(element: HTMLElement, state: boolean) {\r\n\t\tif (element) {\r\n\t\t\tif (state) element.setAttribute('disabled', 'disabled');\r\n\t\t\telse element.removeAttribute('disabled');\r\n\t\t}\r\n\t}\r\n\r\n\tprotected setHidden(element: HTMLElement) {\r\n\t\telement.style.display = 'none';\r\n\t}\r\n\r\n\tprotected setVisible(element: HTMLElement) {\r\n\t\telement.style.removeProperty('display');\r\n\t}\r\n\r\n\tprotected setImage(element: HTMLImageElement, src: string, alt?: string) {\r\n\t\tif (element) {\r\n\t\t\telement.src = src;\r\n\t\t\tif (alt) {\r\n\t\t\t\telement.alt = alt;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender(data?: Partial<T>): HTMLElement {\r\n\t\tObject.assign(this as object, data ?? {});\r\n\t\treturn this.container;\r\n\t}\r\n}\r\n","// Хорошая практика даже простые типы выносить в алиасы\r\n// Зато когда захотите поменять это достаточно сделать в одном месте\r\ntype EventName = string | RegExp;\r\ntype Subscriber = Function;\r\ntype EmitterEvent = {\r\n    eventName: string,\r\n    data: unknown\r\n};\r\n\r\nexport interface IEvents {\r\n    on<T extends object>(event: EventName, callback: (data: T) => void): void;\r\n    emit<T extends object>(event: string, data?: T): void;\r\n    trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void;\r\n}\r\n\r\n/**\r\n * Брокер событий, классическая реализация\r\n * В расширенных вариантах есть возможность подписаться на все события\r\n * или слушать события по шаблону например\r\n */\r\nexport class EventEmitter implements IEvents {\r\n    _events: Map<EventName, Set<Subscriber>>;\r\n\r\n    constructor() {\r\n        this._events = new Map<EventName, Set<Subscriber>>();\r\n    }\r\n\r\n    /**\r\n     * Установить обработчик на событие\r\n     */\r\n    on<T extends object>(eventName: EventName, callback: (event: T) => void) {\r\n        if (!this._events.has(eventName)) {\r\n            this._events.set(eventName, new Set<Subscriber>());\r\n        }\r\n        this._events.get(eventName)?.add(callback);\r\n    }\r\n\r\n    /**\r\n     * Снять обработчик с события\r\n     */\r\n    off(eventName: EventName, callback: Subscriber) {\r\n        if (this._events.has(eventName)) {\r\n            this._events.get(eventName)!.delete(callback);\r\n            if (this._events.get(eventName)?.size === 0) {\r\n                this._events.delete(eventName);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Инициировать событие с данными\r\n     */\r\n    emit<T extends object>(eventName: string, data?: T) {\r\n        this._events.forEach((subscribers, name) => {\r\n            if (name instanceof RegExp && name.test(eventName) || name === eventName) {\r\n                subscribers.forEach(callback => callback(data));\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Слушать все события\r\n     */\r\n    onAll(callback: (event: EmitterEvent) => void) {\r\n        this.on(\"*\", callback);\r\n    }\r\n\r\n    /**\r\n     * Сбросить все обработчики\r\n     */\r\n    offAll() {\r\n        this._events = new Map<string, Set<Subscriber>>();\r\n    }\r\n\r\n    /**\r\n     * Сделать коллбек триггер, генерирующий событие при вызове\r\n     */\r\n    trigger<T extends object>(eventName: string, context?: Partial<T>) {\r\n        return (event: object = {}) => {\r\n            this.emit(eventName, {\r\n                ...(event || {}),\r\n                ...(context || {})\r\n            });\r\n        };\r\n    }\r\n}","import { IEvents } from './EventEmitter';\r\n\r\nexport const isModel = (obj: unknown): obj is Model<any> => {\r\n\treturn obj instanceof Model;\r\n};\r\n\r\nexport abstract class Model<T> {\r\n\tconstructor(data: Partial<T>, protected events: IEvents) {\r\n\t\tObject.assign(this, data);\r\n\t}\r\n\r\n\temitChanges(event: string, payload?: object) {\r\n\t\tthis.events.emit(event, payload ?? {});\r\n\t}\r\n}\r\n","import { Model } from '../base/Model';\r\nimport {\r\n\tIAppState,\r\n\tIProductCard,\r\n\tIFormError,\r\n\tTPayment,\r\n\tIOrder,\r\n\tIOrderForm,\r\n} from '../../types/index';\r\n\r\nenum OrderError {\r\n\tPAYMENT = 'Необходимо указать способ оплаты',\r\n\tADDRESS = 'Необходимо указать адрес',\r\n}\r\n\r\nenum ContactError {\r\n\tEMAIL = 'Необходимо указать email',\r\n\tPHONE = 'Необходимо указать телефон',\r\n}\r\n\r\n\r\nexport class AppState extends Model<IAppState> {\r\n\t//каталог со всеми товарами\r\n\tprotected catalog: IProductCard[];\r\n\t//каталог с купленными товарами\r\n\tprotected basket: IProductCard[] = [];\r\n\t//заказ клиента\r\n\torder: IOrder = {\r\n\t\taddress: '',\r\n\t\tpayment: 'Online',\r\n\t\temail: '',\r\n\t\ttotal: 0,\r\n\t\tphone: '',\r\n\t\titems: [],\r\n\t};\r\n\r\n\tprotected formErrors: IFormError = {};\r\n\r\n\tsetCatalog(items: IProductCard[]) {\r\n\t\tthis.catalog = items.map((item) => {\r\n\t\t\t// Если цена равна null, устанавливаем selected в true\r\n\t\t\tif (item.price === null) {\r\n\t\t\t\titem.selected = true;\r\n\t\t\t}\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\tthis.emitChanges('items:changed', { catalog: this.catalog });\r\n\t}\r\n\r\n\t//получение каталога\r\n\tgetCatalog(): IProductCard[] {\r\n\t\treturn this.catalog;\r\n\t}\r\n\t//получение карточки продукта\r\n\tgetProduct(id: string): IProductCard {\r\n\t\treturn this.catalog.find((item) => item.id === id);\r\n\t}\r\n\r\n\t//добавление товара в корзину\r\n\taddItemToBasket(item: IProductCard) {\r\n\t\tthis.basket.push(item);\r\n\t}\r\n\r\n\t//удаление товара из корзины\r\n\tremoveFromBasket(id: string) {\r\n\t\tthis.basket = this.basket.filter((item) => item.id !== id);\r\n\t\tthis.emitChanges('basket:changed', { basket: this.basket });\r\n\t}\r\n\r\n\t//очистка корзины\r\n\tclearBasket() {\r\n\t\tthis.basket = [];\r\n\t\tthis.emitChanges('basket:changed', { basket: this.basket });\r\n\t}\r\n\r\n\t//вывод итоговой стоимости\r\n\tgetTotalPrice() {\r\n\t\treturn this.basket.reduce((total, item) => {\r\n\t\t\treturn total + (item.price || 0);\r\n\t\t}, 0);\r\n\t}\r\n\r\n\t//вывод количества товаров находящихся в корзине\r\n\tgetBasketQuantity() {\r\n\t\treturn this.basket.length;\r\n\t}\r\n\r\n\t//вывод товаров находящихся в корзине\r\n\tgetBasketList(): IProductCard[] {\r\n\t\treturn this.basket;\r\n\t}\r\n\r\n\t//методы предназначен для установки значений в объекте заказа order и валидации введенных данных.\r\n\tsetOrderField(field: keyof IOrderForm, value: string) {\r\n\t\tif (field === 'payment') {\r\n\t\t\tthis.order[field] = value as TPayment;\r\n\t\t} else {\r\n\t\t\tthis.order[field] = value;\r\n\t\t}\r\n\r\n\t\tif (this.validateForms()) {\r\n\t\t\tthis.events.emit('order:ready', this.order);\r\n\t\t}\r\n\t}\r\n\r\n\tsetContactField(field: keyof IOrderForm, value: string) {\r\n\t\tif (field !== 'payment') {\r\n\t\t\tthis.order[field] = value;\r\n\t\t}\r\n\r\n\t\tconsole.log('state emit: ', field, value);\r\n\t\tif (this.validateForms()) {\r\n\t\t\tthis.events.emit('contacts:ready', this.order);\r\n\t\t}\r\n\t}\r\n\r\n\t// валидация форм\r\n\tvalidateForms() {\r\n\t\tconst errors: typeof this.formErrors = {};\r\n\r\n\t\tif (!this.order.payment) {\r\n\t\t\terrors.payment = OrderError.PAYMENT;\r\n\t\t}\r\n\r\n\t\tif (!this.order.address) {\r\n\t\t\terrors.address = OrderError.ADDRESS;\r\n\t\t}\r\n\r\n\t\tif (!this.order.email) {\r\n\t\t\terrors.email = ContactError.EMAIL;\r\n\t\t}\r\n\r\n\t\tif (!this.order.phone) {\r\n\t\t\terrors.phone = ContactError.PHONE;\r\n\t\t}\r\n\r\n\t\tthis.formErrors = errors;\r\n\t\tthis.events.emit('formErrors:change', this.formErrors);\r\n\t\treturn Object.keys(errors).length === 0;\r\n\t}\r\n\r\n\t//очистка\r\n\tclearOrder() {\r\n\t\tthis.order = {\r\n\t\t\taddress: '',\r\n\t\t\tpayment: 'Online',\r\n\t\t\temail: '',\r\n\t\t\ttotal: 0,\r\n\t\t\tphone: '',\r\n\t\t\titems: [],\r\n\t\t};\r\n\t}\r\n}","import { IProductCard, IOrderModelPost, IOrderModelGet } from './../../types/index';\r\nimport { Api, ApiListResponse } from \"../base/Api\";\r\n\r\n\r\nexport class ProductApi extends Api {\r\n\treadonly cdn: string;\r\n\r\n\tconstructor(cdn: string, baseUrl: string, options?: RequestInit) {\r\n\t\tsuper(baseUrl, options);\r\n\t\tthis.cdn = cdn;\r\n\t}\r\n\r\n\tgetProductList(): Promise<IProductCard[]> {\r\n\t\treturn this.get<ApiListResponse<IProductCard>>('/product').then((data) => {\r\n\t\t\tconst response = data;\r\n\t\t\treturn response.items.map((item) => ({\r\n\t\t\t\t...item,\r\n\t\t\t\timage: this.cdn + item.image,\r\n\t\t\t}));\r\n\t\t});\r\n\t}\r\n\r\n\tgetProductCard(id: string): Promise<IProductCard> {\r\n\t\treturn this.get<IProductCard>(`/product/${id}`).then((data) => {\r\n\t\t\tconst item = data;\r\n\t\t\treturn {\r\n\t\t\t\t...item,\r\n\t\t\t\timage: this.cdn + item.image,\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport class OrderApi extends Api {\r\n\treadonly cdn: string;\r\n\r\n\tconstructor(cdn: string, baseUrl: string, options?: RequestInit) {\r\n\t\tsuper(baseUrl, options);\r\n\t\tthis.cdn = cdn;\r\n\t}\r\n\r\n\torderProduct(order: IOrderModelPost): Promise<IOrderModelGet> {\r\n\t\treturn this.post<IOrderModelGet>('/order', order);\r\n\t}\r\n}","import { Component } from '../../base/Component';\r\nimport { ensureElement } from '../../../utils/utils';\r\nimport { IEvents } from '@/components/base/EventEmitter';\r\n\r\ninterface IModalData {\r\n\tcontent: HTMLElement;\r\n}\r\n\r\nexport class Modal extends Component<IModalData> {\r\n\tprotected _closeButton: HTMLButtonElement;\r\n\tprotected _content: HTMLElement;\r\n\r\n\tconstructor(container: HTMLElement, protected events: IEvents) {\r\n\t\tsuper(container);\r\n\r\n\t\tthis._closeButton = ensureElement<HTMLButtonElement>(\r\n\t\t\t'.modal__close',\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis._content = ensureElement<HTMLElement>(\r\n\t\t\t'.modal__content',\r\n\t\t\tthis.container\r\n\t\t);\r\n\r\n\t\tthis._closeButton.addEventListener('click', this.close.bind(this));\r\n\t\tthis.container.addEventListener('click', this.close.bind(this));\r\n\t\tthis._content.addEventListener('click', (event) => event.stopPropagation());\r\n\t}\r\n\r\n\tset content(value: HTMLElement | null) {\r\n\t\tif (value) {\r\n\t\t\tthis._content.replaceChildren(value);\r\n\t\t} else {\r\n\t\t\tthis._content.innerHTML = '';\r\n\t\t}\r\n\t}\r\n\r\n\topen() {\r\n\t\tthis.container.classList.add('modal_active');\r\n\t\tthis.events.emit('modal:open');\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.container.classList.remove('modal_active');\r\n\t\tthis.content = null;\r\n\t\tthis.events.emit('modal:close');\r\n\t}\r\n\r\n\tisActive(): boolean {\r\n\t\treturn this.container.classList.contains('modal_active');\r\n\t}\r\n\r\n\trender(data: IModalData): HTMLElement {\r\n\t\tsuper.render(data);\r\n\t\tthis.open();\r\n\t\treturn this.container;\r\n\t}\r\n}","import { IBasketCard, IActions } from './../../../types/index';\r\nimport { Component } from '../../base/Component';\r\nimport { ensureElement, createElement, formatNumber } from'../../../utils/utils';\r\nimport { EventEmitter } from '../../base/EventEmitter';\r\n\r\nexport class CardBasket extends Component<IBasketCard> {\r\n\tprotected _title: HTMLElement;\r\n\tprotected _index: HTMLElement;\r\n\tprotected _price: HTMLElement;\r\n\tprotected _deleteButton: HTMLButtonElement;\r\n\r\n\tconstructor(\r\n\t\tprotected blockName: string,\r\n\t\tcontainer: HTMLElement,\r\n\t\tactions?: IActions\r\n\t) {\r\n\t\tsuper(container);\r\n\r\n\t\tthis._title = ensureElement<HTMLElement>(\r\n\t\t\t`.${blockName}__title`,\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis._index = ensureElement<HTMLElement>(\r\n\t\t\t`.basket__item-index`,\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis._price = ensureElement<HTMLElement>(\r\n\t\t\t`.${blockName}__price`,\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis._deleteButton = ensureElement<HTMLButtonElement>(\r\n\t\t\t`.${blockName}__button`,\r\n\t\t\tthis.container\r\n\t\t);\r\n\r\n\t\tthis._deleteButton.addEventListener('click', actions.onClick);\r\n\t}\r\n\r\n\tset index(value: number) {\r\n\t\tthis.setText(this._index, value.toString());\r\n\t}\r\n\r\n\tset title(value: string) {\r\n\t\tthis.setText(this._title, value);\r\n\t}\r\n\tset price(value: number | null) {\r\n\t\tconst priceText = value !== null ? value.toString() : 'Бесценно';\r\n\t\tthis.setText(this._price, priceText);\r\n\t}\r\n\r\n\tset id(id: string) {\r\n\t\tthis.id = id;\r\n\t}\r\n}\r\n\r\nexport interface IBasket {\r\n\tbasketList: HTMLElement[];\r\n\ttotal: number;\r\n\tbutton: HTMLButtonElement;\r\n}\r\n\r\nexport class Basket extends Component<IBasket> {\r\n\tprotected basketList: HTMLElement;\r\n\tprotected total: HTMLElement;\r\n\tprotected button: HTMLButtonElement;\r\n\r\n\tconstructor(container: HTMLElement, protected events: EventEmitter) {\r\n\t\tsuper(container);\r\n\r\n\t\tthis.basketList = ensureElement<HTMLElement>(\r\n\t\t\t'.basket__list',\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis.total = ensureElement<HTMLElement>('.basket__price', this.container);\r\n\t\tthis.button = ensureElement<HTMLButtonElement>(\r\n\t\t\t'.basket__button',\r\n\t\t\tthis.container\r\n\t\t);\r\n\r\n\t\tthis.button.addEventListener('click', () => {\r\n\t\t\tevents.emit('orderform:open');\r\n\t\t});\r\n\r\n\t\tthis.items = [];\r\n\t}\r\n\r\n\tset items(items: HTMLElement[]) {\r\n\t\tif (items.length) {\r\n\t\t\tthis.basketList.replaceChildren(...items);\r\n\t\t} else {\r\n\t\t\tthis.basketList.replaceChildren(\r\n\t\t\t\tcreateElement<HTMLParagraphElement>('p', {\r\n\t\t\t\t\ttextContent: 'Корзина пуста',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tset selected(items: string[]) {\r\n\t\tif (items.length) {\r\n\t\t\tthis.setDisabled(this.button, false);\r\n\t\t} else {\r\n\t\t\tthis.setDisabled(this.button, true);\r\n\t\t}\r\n\t}\r\n\r\n\tdisableButton() {\r\n\t\tthis.setDisabled(this.button, true);\r\n\t}\r\n\r\n\tundisableButton() {\r\n\t\tthis.setDisabled(this.button, false);\r\n\t}\r\n\r\n\tset totalPrice(total: number) {\r\n\t\tthis.setText(this.total, `${formatNumber(total)} синапсов`);\r\n\t}\r\n\r\n\tgetContainer(): HTMLElement {\r\n\t\treturn this.container;\r\n\t}\r\n}","import { IProductCard, CategoryType } from './../../../types/index';\r\nimport { Component } from '../../base/Component';\r\nimport { ensureElement } from '../../../utils/utils';\r\nimport { IEvents } from '@/components/base/EventEmitter';\r\n\r\nexport interface IActions {\r\n\tonClick: (event: MouseEvent) => void;\r\n}\r\n\r\nexport class Card extends Component<IProductCard> {\r\n\tprotected _category: HTMLElement;\r\n\tprotected _title: HTMLElement;\r\n\tprotected _image: HTMLImageElement;\r\n\tprotected _price: HTMLElement;\r\n\tprotected _id: string;\r\n\tprotected _priceValue: number | null;\r\n\r\n\tconstructor(\r\n\t\tprotected blockName: string,\r\n\t\tcontainer: HTMLElement,\r\n\t\tprotected events: IEvents,\r\n\t\tactions?: IActions\r\n\t) {\r\n\t\tsuper(container);\r\n\r\n\t\tthis._category = ensureElement<HTMLElement>(\r\n\t\t\t`.${blockName}__category`,\r\n\t\t\tcontainer\r\n\t\t);\r\n\t\tthis._title = ensureElement<HTMLElement>(`.${blockName}__title`, container);\r\n\t\tthis._image = ensureElement<HTMLImageElement>(\r\n\t\t\t`.${blockName}__image`,\r\n\t\t\tcontainer\r\n\t\t);\r\n\r\n\t\tthis._price = ensureElement<HTMLElement>(`.${blockName}__price`, container);\r\n\r\n\t\tif (actions?.onClick) {\r\n\t\t\tthis.container.addEventListener('click', actions.onClick);\r\n\t\t}\r\n\t}\r\n\r\n\tset id(value: string) {\r\n\t\tthis._id = value;\r\n\t\tthis.container.dataset.id = value;\r\n\t}\r\n\r\n\tget id(): string {\r\n\t\treturn this.container.dataset.id || '';\r\n\t}\r\n\r\n\tset title(value: string) {\r\n\t\tthis.setText(this._title, value);\r\n\t}\r\n\r\n\tget title(): string {\r\n\t\treturn this._title.textContent || '';\r\n\t}\r\n\r\n\tset image(value: string) {\r\n\t\tthis.setImage(this._image, value, this.title);\r\n\t}\r\n\r\n\tset price(value: number | null) {\r\n\t\tthis._priceValue = value;\r\n\t\tconst priceText = value !== null ? value.toString() + ' синапсов' : 'Бесценно';\r\n\t\tthis.setText(this._price, priceText)\r\n\t}\r\n\r\n\tget price(): number | null {\r\n\t\treturn this._priceValue;\r\n\t}\r\n\r\n\tset category(value: CategoryType) {\r\n\t\tthis.setText(this._category, value);\r\n\t\tif (value === 'софт-скил') {\r\n\t\t\tthis._category.classList.add('card__category_soft');\r\n\t\t}\r\n\t\tif (value === 'другое') {\r\n\t\t\tthis._category.classList.add('card__category_other');\r\n\t\t}\r\n\t\tif (value === 'дополнительное') {\r\n\t\t\tthis._category.classList.add('card__category_additional');\r\n\t\t}\r\n\t\tif (value === 'хард-скил') {\r\n\t\t\tthis._category.classList.add('card__category_hard');\r\n\t\t}\r\n\t\tif (value === 'кнопка') {\r\n\t\t\tthis._category.classList.add('card__category__button');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class CardPreview extends Card {\r\n\tprotected _description: HTMLElement;\r\n\tprotected _button: HTMLButtonElement;\r\n\r\n\tconstructor(container: HTMLElement, events: IEvents) {\r\n\t\tsuper('card', container, events);\r\n\t\tthis._description = ensureElement<HTMLElement>(\r\n\t\t\t`.${this.blockName}__text`,\r\n\t\t\tcontainer\r\n\t\t);\r\n\t\tthis._button = ensureElement<HTMLButtonElement>(\r\n\t\t\t`.${this.blockName}__button`,\r\n\t\t\tcontainer\r\n\t\t);\r\n\r\n\t\tthis._button.addEventListener('click', () => {\r\n\t\t\tthis.events.emit('card:addtobasket', {\r\n\t\t\t\tid: this.id,\r\n\t\t\t\ttitle: this.title,\r\n\t\t\t\tprice: this.price,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tset selected(value: boolean) {\r\n\t\tthis.setDisabled(this._button, value)\r\n\t}\r\n\r\n\tset description(value: string) {\r\n\t\tthis.setText(this._description, value)\r\n\t}\r\n\r\n\tget description() {\r\n\t\treturn this._description.textContent || '';\r\n\t}\r\n}","import { Component } from '../../base/Component';\r\nimport { IEvents } from '@/components/base/EventEmitter';\r\nimport { ensureElement } from '../../../utils/utils';\r\n\r\nexport interface IPage {\r\n\tcatalog: HTMLElement;\r\n\tbasket: HTMLElement;\r\n\tbasketCounter: HTMLElement;\r\n\tlocked: boolean;\r\n}\r\n\r\nexport class Page extends Component<IPage> {\r\n\tprotected _catalog: HTMLElement;\r\n\tprotected _basket: HTMLElement;\r\n\tprotected _basketCounter: HTMLElement;\r\n\tprotected _wrapper: HTMLElement;\r\n\r\n\tconstructor(container: HTMLElement, protected events: IEvents) {\r\n\t\tsuper(container);\r\n\r\n\t\tthis._catalog = ensureElement<HTMLElement>('.gallery');\r\n\t\tthis._basket = ensureElement<HTMLElement>('.header__basket');\r\n\t\tthis._basketCounter = ensureElement<HTMLElement>('.header__basket-counter');\r\n\t\tthis._wrapper = ensureElement<HTMLElement>('.page__wrapper');\r\n\r\n\t\tthis._basket.addEventListener('click', () => {\r\n\t\t\tthis.events.emit('basket:open');\r\n\t\t});\r\n\t}\r\n\r\n\tset counter(value: number) {\r\n\t\tthis.setText(this._basketCounter, String(value));\r\n\t}\r\n\r\n\tset catalog(items: HTMLElement[]) {\r\n\t\tthis._catalog.replaceChildren(...items);\r\n\t}\r\n\r\n\tset locked(value: boolean) {\r\n\t\tif (value) {\r\n\t\t\tthis._wrapper.classList.add('page__wrapper_locked');\r\n\t\t} else {\r\n\t\t\tthis._wrapper.classList.remove('page__wrapper_locked');\r\n\t\t}\r\n\t}\r\n}","import { Component } from '../../base/Component';\r\nimport { IEvents } from '../../base/EventEmitter';\r\nimport { ensureElement } from '../../../utils/utils';\r\n\r\ninterface IFormState {\r\n\tvalid: boolean;\r\n\terrors: string[];\r\n}\r\n\r\nexport class Form<T> extends Component<IFormState> {\r\n\tprotected _submit: HTMLButtonElement;\r\n\tprotected _errors: HTMLElement;\r\n\r\n\tconstructor(protected container: HTMLFormElement, protected events: IEvents) {\r\n\t\tsuper(container);\r\n\r\n\t\tthis._submit = ensureElement<HTMLButtonElement>(\r\n\t\t\t'button[type=submit]',\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis._errors = ensureElement<HTMLElement>('.form__errors', this.container);\r\n\r\n\t\tthis.container.addEventListener('input', (e: Event) => {\r\n\t\t\tconst target = e.target as HTMLInputElement;\r\n\t\t\tconst field = target.name as keyof T;\r\n\t\t\tconst value = target.value;\r\n\t\t\tthis.onInputChange(field, value);\r\n\t\t});\r\n\r\n\t\tthis.container.addEventListener('submit', (e: Event) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.events.emit(`${this.container.name}:submit`);\r\n\t\t});\r\n\t}\r\n\r\n\tprotected onInputChange(field: keyof T, value: string) {\r\n\t\tthis.events.emit(`${this.container.name}.${String(field)}:change`, {\r\n\t\t\tfield,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tset valid(value: boolean) {\r\n\t\tthis.setDisabled(this._submit, !value)\r\n\t}\r\n\r\n\tset errors(value: string) {\r\n\t\tthis.setText(this._errors, value);\r\n\t}\r\n\r\n\trender(state: Partial<T> & IFormState) {\r\n\t\tconst { valid, errors, ...inputs } = state;\r\n\t\tsuper.render({ valid, errors });\r\n\t\tObject.assign(this, inputs);\r\n\t\treturn this.container;\r\n\t}\r\n}","import { IOrderForm } from '../../../types/index';\r\nimport { IEvents } from '..//../base/EventEmitter';\r\nimport { Form } from './Form';\r\n\r\nexport class FormContacts extends Form<IOrderForm> {\r\n\tconstructor(protected container: HTMLFormElement, protected events: IEvents) {\r\n\t\tsuper(container, events);\r\n\t}\r\n\r\n\tset email(value: string) {\r\n\t\t(this.container.elements.namedItem('email') as HTMLInputElement).value =\r\n\t\t\tvalue;\r\n\t}\r\n\r\n\tset phone(value: string) {\r\n\t\t(this.container.elements.namedItem('phone') as HTMLInputElement).value =\r\n\t\t\tvalue;\r\n\t}\r\n}","import { IOrderForm } from '@/types';\r\nimport { IEvents } from '../../base/EventEmitter';\r\nimport { Form } from './Form';\r\n\r\nexport interface PaymentChangeEventDetail {\r\n\tbutton: 'online' | 'recipt';\r\n}\r\n\r\nexport class FormOrder extends Form<IOrderForm> {\r\n\tprotected online: HTMLButtonElement;\r\n\tprotected recipt: HTMLButtonElement;\r\n\r\n\tconstructor(protected container: HTMLFormElement, protected events: IEvents) {\r\n\t\tsuper(container, events);\r\n\r\n\t\tthis.online = container.elements.namedItem('card') as HTMLButtonElement;\r\n\t\tthis.recipt = container.elements.namedItem('cash') as HTMLButtonElement;\r\n\r\n\t\tthis.online.addEventListener('click', () =>\r\n\t\t\tthis.toggleActiveButton('online')\r\n\t\t);\r\n\t\tthis.recipt.addEventListener('click', () =>\r\n\t\t\tthis.toggleActiveButton('recipt')\r\n\t\t);\r\n\t}\r\n\r\n\tprivate toggleActiveButton(button: 'online' | 'recipt') {\r\n\t\tif (button === 'online') {\r\n\t\t\tthis.toggleClass(this.online, 'button_alt-active', true);\r\n\t\t\tthis.toggleClass(this.recipt, 'button_alt-active', false);\r\n\t\t} else {\r\n\t\t\tthis.toggleClass(this.online, 'button_alt-active', false);\r\n\t\t\tthis.toggleClass(this.recipt, 'button_alt-active', true);\r\n\t\t}\r\n\r\n\r\n\t\tthis.events.emit<PaymentChangeEventDetail>('payment:change', { button });\r\n\t}\r\n\r\n\tset address(value: string) {\r\n\t\t(this.container.elements.namedItem('address') as HTMLInputElement).value =\r\n\t\t\tvalue;\r\n\t}\r\n\r\n\tdisableButtons() {\r\n\t\tthis.toggleClass(this.online, 'button_alt-active', false);\r\n\t\tthis.toggleClass(this.recipt, 'button_alt-active', false);\r\n\t}\r\n}","import { Component } from '../../base/Component';\r\nimport { ensureElement, formatNumber } from '../../../utils/utils'\r\nimport { IEvents } from './../../base/EventEmitter';\r\n\r\ninterface ISuccess {\r\n\ttotal: number;\r\n}\r\n\r\nexport class Success extends Component<ISuccess> {\r\n\tprotected _buttonclose: HTMLElement;\r\n\tprotected _description: HTMLElement;\r\n\r\n\tconstructor(container: HTMLElement, events: IEvents) {\r\n\t\tsuper(container);\r\n\t\tthis._buttonclose = ensureElement<HTMLElement>(\r\n\t\t\t'.order-success__close',\r\n\t\t\tthis.container\r\n\t\t);\r\n\t\tthis._description = ensureElement<HTMLElement>(\r\n\t\t\t'.order-success__description',\r\n\t\t\tthis.container\r\n\t\t);\r\n\r\n\t\tthis._buttonclose.addEventListener('click', () => {\r\n\t\t\tevents.emit('sucess:close');\r\n\t\t});\r\n\t}\r\n\r\n\tset total(value: number) {\r\n    this.setText(this._description, `Списано ${formatNumber(value)} синапсов`);\r\n  }\r\n}","export const API_URL = `${process.env.API_ORIGIN}/api/weblarek`;\r\nexport const CDN_URL = `${process.env.API_ORIGIN}/content/weblarek`;\r\n\r\nexport const settings = {\r\n\r\n};","export function pascalToKebab(value: string): string {\r\n    return value.replace(/([a-z0–9])([A-Z])/g, \"$1-$2\").toLowerCase();\r\n}\r\n\r\nexport function isSelector(x: any): x is string {\r\n    return (typeof x === \"string\") && x.length > 1;\r\n}\r\n\r\nexport function isEmpty(value: any): boolean {\r\n    return value === null || value === undefined;\r\n}\r\n\r\nexport type SelectorCollection<T> = string | NodeListOf<Element> | T[];\r\n\r\nexport function ensureAllElements<T extends HTMLElement>(selectorElement: SelectorCollection<T>, context: HTMLElement = document as unknown as HTMLElement): T[] {\r\n    if (isSelector(selectorElement)) {\r\n        return Array.from(context.querySelectorAll(selectorElement)) as T[];\r\n    }\r\n    if (selectorElement instanceof NodeList) {\r\n        return Array.from(selectorElement) as T[];\r\n    }\r\n    if (Array.isArray(selectorElement)) {\r\n        return selectorElement;\r\n    }\r\n    throw new Error(`Unknown selector element`);\r\n}\r\n\r\nexport type SelectorElement<T> = T | string;\r\n\r\nexport function ensureElement<T extends HTMLElement>(selectorElement: SelectorElement<T>, context?: HTMLElement): T {\r\n    if (isSelector(selectorElement)) {\r\n        const elements = ensureAllElements<T>(selectorElement, context);\r\n        if (elements.length > 1) {\r\n            console.warn(`selector ${selectorElement} return more then one element`);\r\n        }\r\n        if (elements.length === 0) {\r\n            throw new Error(`selector ${selectorElement} return nothing`);\r\n        }\r\n        return elements.pop() as T;\r\n    }\r\n    if (selectorElement instanceof HTMLElement) {\r\n        return selectorElement as T;\r\n    }\r\n    throw new Error('Unknown selector element');\r\n}\r\n\r\nexport function cloneTemplate<T extends HTMLElement>(query: string | HTMLTemplateElement): T {\r\n    const template = ensureElement(query) as HTMLTemplateElement;\r\n    return template.content.firstElementChild.cloneNode(true) as T;\r\n}\r\n\r\nexport function bem(block: string, element?: string, modifier?: string): { name: string, class: string } {\r\n    let name = block;\r\n    if (element) name += `__${element}`;\r\n    if (modifier) name += `_${modifier}`;\r\n    return {\r\n        name,\r\n        class: `.${name}`\r\n    };\r\n}\r\n\r\nexport function getObjectProperties(obj: object, filter?: (name: string, prop: PropertyDescriptor) => boolean): string[] {\r\n    return Object.entries(\r\n        Object.getOwnPropertyDescriptors(\r\n            Object.getPrototypeOf(obj)\r\n        )\r\n    )\r\n        .filter(([name, prop]: [string, PropertyDescriptor]) => filter ? filter(name, prop) : (name !== 'constructor'))\r\n        .map(([name, prop]) => name);\r\n}\r\n\r\n/**\r\n * Устанавливает dataset атрибуты элемента\r\n */\r\nexport function setElementData<T extends Record<string, unknown> | object>(el: HTMLElement, data: T) {\r\n    for (const key in data) {\r\n        el.dataset[key] = String(data[key]);\r\n    }\r\n}\r\n\r\n/**\r\n * Получает типизированные данные из dataset атрибутов элемента\r\n */\r\nexport function getElementData<T extends Record<string, unknown>>(el: HTMLElement, scheme: Record<string, Function>): T {\r\n    const data: Partial<T> = {};\r\n    for (const key in el.dataset) {\r\n        data[key as keyof T] = scheme[key](el.dataset[key]);\r\n    }\r\n    return data as T;\r\n}\r\n\r\n/**\r\n * Проверка на простой объект\r\n */\r\nexport function isPlainObject(obj: unknown): obj is object {\r\n    const prototype = Object.getPrototypeOf(obj);\r\n    return  prototype === Object.getPrototypeOf({}) ||\r\n        prototype === null;\r\n}\r\n\r\nexport function isBoolean(v: unknown): v is boolean {\r\n    return typeof v === 'boolean';\r\n}\r\n\r\n/**\r\n * Фабрика DOM-элементов в простейшей реализации\r\n * здесь не учтено много факторов\r\n * в интернет можно найти более полные реализации\r\n */\r\nexport function createElement<\r\n    T extends HTMLElement\r\n    >(\r\n    tagName: keyof HTMLElementTagNameMap,\r\n    props?: Partial<Record<keyof T, string | boolean | object>>,\r\n    children?: HTMLElement | HTMLElement []\r\n): T {\r\n    const element = document.createElement(tagName) as T;\r\n    if (props) {\r\n        for (const key in props) {\r\n            const value = props[key];\r\n            if (isPlainObject(value) && key === 'dataset') {\r\n                setElementData(element, value);\r\n            } else {\r\n                // @ts-expect-error fix indexing later\r\n                element[key] = isBoolean(value) ? value : String(value);\r\n            }\r\n        }\r\n    }\r\n    if (children) {\r\n        for (const child of Array.isArray(children) ? children : [children]) {\r\n            element.append(child);\r\n        }\r\n    }\r\n    return element;\r\n}\r\n\r\nexport function formatNumber(number:number) {\r\n    return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './scss/styles.scss';\r\nimport { ApiListResponse } from './components/base/Api';\r\nimport { API_URL, CDN_URL } from './utils/constants';\r\nimport { OrderApi, ProductApi } from './components/view/ProductApi';\r\nimport { cloneTemplate, ensureElement } from './utils/utils';\r\nimport { IOrderForm, IOrderModelPost, IProductCard } from './types/index';\r\nimport { EventEmitter } from './components/base/EventEmitter';\r\nimport { AppState } from './components/model/AppState';\r\nimport { Page } from './components/view/partial/Page';\r\nimport { Modal } from './components/view/common/Modal';\r\nimport { Card, CardPreview } from './components/view/partial/Card';\r\nimport { CardBasket, Basket } from './components/view/partial/Basket';\r\nimport { FormOrder } from './components/view/screen/FormOrder';\r\nimport { FormContacts } from './components/view/screen/FormContacts';\r\nimport { Success } from './components/view/screen/Success';\r\nimport { IBasketRemoveItem } from './types/index';\r\n\r\nconst cardCatalogTemplate = ensureElement<HTMLTemplateElement>('#card-catalog');\r\nconst cardPreviewTemplate = ensureElement<HTMLTemplateElement>('#card-preview');\r\nconst cardBasketTemplate = ensureElement<HTMLTemplateElement>('#card-basket');\r\nconst basketTemplate = ensureElement<HTMLTemplateElement>('#basket');\r\nconst formOrderTempalte = ensureElement<HTMLTemplateElement>('#order');\r\nconst formContactsTemplate = ensureElement<HTMLTemplateElement>('#contacts');\r\nconst successTemplate = ensureElement<HTMLTemplateElement>('#success');\r\n\r\nconst events = new EventEmitter();\r\n\r\nconst page = new Page(document.body, events);\r\nconst modal = new Modal(ensureElement<HTMLElement>('#modal-container'), events);\r\n\r\nconst basket = new Basket(cloneTemplate(basketTemplate), events);\r\nconst orderForm = new FormOrder(cloneTemplate(formOrderTempalte), events);\r\nconst contactsForm = new FormContacts(\r\n\tcloneTemplate(formContactsTemplate),\r\n\tevents\r\n);\r\nconst success = new Success(cloneTemplate(successTemplate), events);\r\n\r\nconst api = new ProductApi(CDN_URL, API_URL);\r\nconst appData = new AppState({}, events);\r\napi.getProductList().then((response) => {\r\n\tappData.setCatalog(response);\r\n})\r\n.catch((error) => console.log(error));\r\n\r\nconst orderApi = new OrderApi(CDN_URL, API_URL);\r\n\r\nevents.on('items:changed', () => {\r\n\tpage.catalog = appData.getCatalog().map((item) => {\r\n\t\tconst card = new Card('card', cloneTemplate(cardCatalogTemplate), events, {\r\n\t\t\tonClick: () => events.emit('cardItem:open', item),\r\n\t\t});\r\n\t\treturn card.render({\r\n\t\t\tcategory: item.category,\r\n\t\t\ttitle: item.title,\r\n\t\t\timage: item.image,\r\n\t\t\tprice: item.price,\r\n\t\t\tid: item.id,\r\n\t\t});\r\n\t});\r\n});\r\n\r\nevents.on('cardItem:open', (data) => {\r\n\tconst cardItem = data as Card;\r\n\tconst item = appData.getCatalog().find((item) => item.id === cardItem.id);\r\n\tconst cardPreview = new CardPreview(\r\n\t\tcloneTemplate(cardPreviewTemplate),\r\n\t\tevents\r\n\t);\r\n\tmodal.render({ content: cardPreview.render(item) });\r\n\tpage.locked = true;\r\n});\r\n\r\nevents.on('card:addtobasket', (data) => {\r\n\tconst cardItem = data as Card;\r\n\tconst orderitem = appData\r\n\t\t.getCatalog()\r\n\t\t.find((item) => item.id === cardItem.id);\r\n\torderitem.selected = true;\r\n\tappData.addItemToBasket(orderitem as IProductCard);\r\n\tpage.counter = appData.getBasketList().length;\r\n\tmodal.close();\r\n});\r\n\r\nevents.on('basket:open', () => {\r\n\tconst basketArray = appData.getBasketList();\r\n\tconst cardBasketElements = basketArray.map((item, index) => {\r\n\t\tconst cardBasketElement = cloneTemplate(cardBasketTemplate);\r\n\t\tconst cardBasket = new CardBasket('card', cardBasketElement, {\r\n\t\t\tonClick: () => events.emit('basket:delete', {\r\n\t\t\t\titem,\r\n\t\t\t\telement: cardBasketElement\r\n\t\t\t}),\r\n\t\t});\r\n\t\tcardBasket.index = index + 1;\r\n\t\tcardBasket.title = item.title;\r\n\t\tcardBasket.price = item.price;\r\n\t\treturn cardBasketElement;\r\n\t});\r\n\tif (basketArray.length === 0) {\r\n\t\tbasket.disableButton();\r\n\t} else {\r\n\t\tbasket.undisableButton();\r\n\t}\r\n\tbasket.items = cardBasketElements;\r\n\tbasket.totalPrice = basketArray.reduce(\r\n\t\t(total, item) => total + (item.price || 0),\r\n\t\t0\r\n\t);\r\n\tmodal.render({ content: basket.getContainer() });\r\n\tpage.locked = true;\r\n});\r\n\r\nevents.on('basket:changed', (item: IProductCard) => {\r\n\titem.selected = false;\r\n\tpage.counter = appData.getBasketList().length;\r\n\tconst basketArray = appData.getBasketList();\r\n\tbasket.totalPrice = basketArray.reduce(\r\n\t\t(total, item) => total + (item.price || 0),\r\n\t\t0\r\n\t);\r\n})\r\n\r\nevents.on('basket:delete', (removeObj: IBasketRemoveItem) => {\r\n\tappData.removeFromBasket(removeObj.item.id);\r\n\tremoveObj.element.remove();\r\n\tconst orderitem = appData\r\n\t\t.getCatalog()\r\n\t\t.find((item) => item.id === removeObj.item.id);\r\n\torderitem.selected = false;\r\n});\r\n\r\nevents.on('orderform:open', () => {\r\n\tmodal.render({\r\n\t\tcontent: orderForm.render({\r\n\t\t\taddress: '',\r\n\t\t\tvalid: false,\r\n\t\t\terrors: [],\r\n\t\t}),\r\n\t});\r\n});\r\n\r\nevents.on('formErrors:change', (errors: Partial<IOrderForm>) => {\r\n\tconst { email, phone, address, payment } = errors;\r\n\torderForm.valid = !address && !payment;\r\n\tcontactsForm.valid = !email && !phone;\r\n\torderForm.errors = Object.values({ address, payment })\r\n\t\t.filter((i) => !!i)\r\n\t\t.join('; ');\r\n\tcontactsForm.errors = Object.values({ email, phone })\r\n\t\t.filter((i) => !!i)\r\n\t\t.join('; ');\r\n});\r\n\r\nevents.on(\r\n\t/^order\\..*:change/,\r\n\t(data: { field: keyof IOrderForm; value: string }) => {\r\n\t\tappData.setOrderField(data.field, data.value);\r\n\t}\r\n);\r\n\r\nevents.on(\r\n\t/^contacts\\..*:change/,\r\n\t(data: { field: keyof IOrderForm; value: string }) => {\r\n\t\tappData.setContactField(data.field, data.value);\r\n\t}\r\n);\r\n\r\nevents.on('order:submit', () => {\r\n\tappData.order.total = appData.getTotalPrice();\r\n\tmodal.render({\r\n\t\tcontent: contactsForm.render({\r\n\t\t\temail: '',\r\n\t\t\tphone: '',\r\n\t\t\tvalid: false,\r\n\t\t\terrors: [],\r\n\t\t}),\r\n\t});\r\n});\r\n\r\nevents.on('contacts:submit', () => {\r\n\tappData.order.items = appData.getBasketList().map((item) => item.id);\r\n\torderApi\r\n\t\t.orderProduct(appData.order as IOrderModelPost)\r\n\t\t.then((response: any) => {\r\n\t\t\tevents.emit('order:success', response);\r\n\t\t\tappData.clearBasket();\r\n\t\t\tappData.clearOrder();\r\n\t\t\tpage.counter = 0;\r\n\t\t\tappData.getCatalog().forEach((item) => {\r\n\t\t\t\tif (item.price === null) {\r\n\t\t\t\t\titem.selected = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.selected = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch((error) => console.log(error));\r\n});\r\n\r\nevents.on('order:success', (response: ApiListResponse<string>) => {\r\n\tmodal.render({\r\n\t\tcontent: success.render({\r\n\t\t\ttotal: response.total,\r\n\t\t}),\r\n\t});\r\n});\r\n\r\nevents.on('sucess:close', () => {\r\n\tmodal.close();\r\n});\r\n\r\nevents.on('modal:close', () => {\r\n\tpage.locked = false;\r\n});\r\n"],"names":["Api","baseUrl","options","arguments","length","undefined","_classCallCheck","this","headers","Object","assign","_a","_createClass","key","value","handleResponse","response","ok","json","then","data","Promise","reject","error","statusText","get","uri","fetch","method","post","body","JSON","stringify","exports","Component","container","toggleClass","element","className","force","classList","toggle","setText","textContent","String","setDisabled","state","setAttribute","removeAttribute","setHidden","style","display","setVisible","removeProperty","setImage","src","alt","render","EventEmitter","_events","Map","on","eventName","callback","has","set","Set","add","off","size","emit","forEach","subscribers","name","RegExp","test","onAll","offAll","trigger","context","_this","event","isModel","obj","Model","events","emitChanges","payload","OrderError","ContactError","Model_1","require","AppState","_Model_1$Model","_inherits","_super","_createSuper","basket","order","address","payment","email","total","phone","items","formErrors","setCatalog","catalog","map","item","price","selected","getCatalog","getProduct","id","find","addItemToBasket","push","removeFromBasket","filter","clearBasket","getTotalPrice","reduce","getBasketQuantity","getBasketList","setOrderField","field","validateForms","setContactField","console","log","errors","PAYMENT","ADDRESS","EMAIL","PHONE","keys","clearOrder","Api_1","ProductApi","_Api_1$Api","cdn","call","getProductList","_this2","image","getProductCard","_this3","concat","OrderApi","_Api_1$Api2","_super2","_this4","orderProduct","Component_1","utils_1","Modal","_Component_1$Componen","_closeButton","ensureElement","_content","addEventListener","close","bind","_assertThisInitialized","stopPropagation","replaceChildren","innerHTML","open","remove","content","isActive","contains","_get","_getPrototypeOf","prototype","CardBasket","blockName","actions","_title","_index","_price","_deleteButton","onClick","toString","priceText","Basket","_Component_1$Componen2","basketList","button","_this$basketList","apply","_toConsumableArray","createElement","disableButton","undisableButton","formatNumber","getContainer","Card","_category","_image","dataset","_id","title","_priceValue","CardPreview","_Card","_description","_button","Page","_catalog","_basket","_basketCounter","_wrapper","_this$_catalog","Form","_submit","_errors","e","target","onInputChange","preventDefault","valid","inputs","__rest","FormContacts","_Form_1$Form","elements","namedItem","FormOrder","online","recipt","toggleActiveButton","disableButtons","Success","_buttonclose","process","isSelector","x","ensureAllElements","selectorElement","document","Array","from","querySelectorAll","NodeList","isArray","Error","warn","pop","HTMLElement","setElementData","el","isPlainObject","getPrototypeOf","isBoolean","v","pascalToKebab","replace","toLowerCase","isEmpty","cloneTemplate","query","firstElementChild","cloneNode","bem","block","modifier","class","getObjectProperties","entries","getOwnPropertyDescriptors","_ref","_ref2","_slicedToArray","prop","_ref3","_ref4","getElementData","scheme","tagName","props","children","_step","_iterator","_createForOfIteratorHelper","s","n","done","child","append","err","f","number","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","r","Symbol","toStringTag","defineProperty","constants_1","ProductApi_1","EventEmitter_1","AppState_1","Page_1","Modal_1","Card_1","Basket_1","FormOrder_1","FormContacts_1","Success_1","cardCatalogTemplate","cardPreviewTemplate","cardBasketTemplate","basketTemplate","formOrderTempalte","formContactsTemplate","successTemplate","page","modal","orderForm","contactsForm","success","api","CDN_URL","API_URL","appData","orderApi","category","cardItem","cardPreview","locked","orderitem","counter","basketArray","cardBasketElements","index","cardBasketElement","cardBasket","totalPrice","removeObj","values","i","join"],"sourceRoot":""}